<nav class="external-header">
  <img class="logo" routerLink="/" src="../../assets/images/logo.png"/>
</nav>

<section>
  <ng-container [ngSwitch]="step">

    <nav class="navigation">
      <ul class="steps-parent" #parent>
        <button id="clicked" (click)="chooseStep($event,'one')" class="one">{{ barber.firstName == null ? 'Barber': barber.firstName + ' ' + barber.lastName }}</button>
        <button (click)="chooseStep($event,'two')" class="two" [disabled]="barber.firstName == null">{{ service.serviceType == null ? 'Service': service.serviceType }}</button>
        <button (click)="chooseStep($event,'three')" class="three" [disabled]="service.serviceType == null">{{ datetime == null ? 'Date and Time': datetime.hour }}</button>
        <button (click)="chooseStep($event,'four')" class="four" [disabled]="datetime == null"> Finish </button>
      </ul>
    </nav>

    <div *ngSwitchCase="'one'" [@fadeOut]>

      <div class="barbers-container">
        <div class="barber" *ngFor="let barber of barbers" (click)="chooseBarber(barber)">
          <img class="barber-image" src="{{barber?.picture}}" alt="Image">
          <div class="button-wrapper">
            <a><span>{{barber.firstName}} {{barber.lastName}}</span></a>
          </div>
        </div>
      </div>
    </div>

    <div *ngSwitchCase="'two'" [@fadeOut]>

      <div class="service" *ngFor="let service of barber.services" (click)="chooseService(service)">
        <div class="service-info-wrapper">
          <span class="type">{{service.serviceType}}</span>

          <div class="space"></div>

          <div>
            <span class="duration">{{service.duration}} мин.</span>
            <span class="price">{{service.price}} лв.</span>
          </div>
        </div>
      </div>
    </div>

    <div *ngSwitchCase="'three'" [@fadeOut]>
        <app-barber-calendar (navigation)="chooseDateTime($event)" [barber]="barber" [service]="service"> </app-barber-calendar>
    </div>

    <div *ngSwitchCase="'four'" [@fadeOut]>

      <div class="final-info-container">

        <div *ngIf="done" class="done">
          <mat-icon> done </mat-icon> <br/>

          <p> Thank you for choosing us !</p>
          <p> You have a booked hour for {{this.datetime.date}} / {{this.datetime.hour}} h. </p>

        </div>

        <ng-container *ngIf="!done">
          <div class="info-row">
            <span> <b> Date: </b> </span> <span> {{this.datetime.date}} </span>
          </div>
          <div class="info-row">
            <span> <b> Hour: </b> </span> <span> {{this.datetime.hour}} </span>
          </div>
          <div class="info-row">
            <span> <b> Barber: </b> </span> <span> {{this.barber.firstName}} {{this.barber.lastName}}</span>
          </div>
          <div class="info-row">
            <span> <b> Service: </b> </span> <span> {{this.service.serviceType}} </span>
          </div>
          <div class="info-row">
            <span> <b> Price: </b> </span> <span> {{this.service.price}} лв.</span>
          </div>
          <div class="info-row">
            <span> <b> Duration: </b> </span> <span> {{this.service.duration}} мин.</span>
          </div>

          <button class="confirm-button" (click)="sendEmail()">
            Confirm with Facebook
          </button>
        </ng-container>
      </div>

    </div>

  </ng-container>
</section>
